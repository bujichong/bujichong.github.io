<!DOCTYPE html>
<!-- saved from url=(0062)http://www.zhufengpeixun.com/jg-vue/vue-apply/interview-1.html -->
<html lang="en-US" class=" "><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2020全新 最火Vue面试题训练营 | 珠峰架构师课</title>


    <link rel="preload" href="../htmlSource/0.styles.ae591a53.css" as="style"><link rel="preload" href="../htmlSource/app.050b55ce.js" as="script"><link rel="preload" href="../htmlSource/2.81bbef92.js" as="script"><link rel="preload" href="../htmlSource/23.227804df.js" as="script"><link rel="prefetch" href="../assets/js/10.242ac504.js"><link rel="prefetch" href="../assets/js/100.40f369fa.js"><link rel="prefetch" href="../assets/js/101.87c16da3.js"><link rel="prefetch" href="../assets/js/102.3fd956e8.js"><link rel="prefetch" href="../assets/js/103.fc890c93.js"><link rel="prefetch" href="../assets/js/104.f41dd6e6.js"><link rel="prefetch" href="../assets/js/105.362ce4db.js"><link rel="prefetch" href="../assets/js/106.47e01ae2.js"><link rel="prefetch" href="../assets/js/107.d232cac4.js"><link rel="prefetch" href="../assets/js/108.73f050bb.js"><link rel="prefetch" href="../assets/js/109.b06a7161.js"><link rel="prefetch" href="../assets/js/11.1339d72c.js"><link rel="prefetch" href="../assets/js/110.58e0ddff.js"><link rel="prefetch" href="../assets/js/111.d3e4888f.js"><link rel="prefetch" href="../assets/js/112.aeb6f0ee.js"><link rel="prefetch" href="../assets/js/113.4c741379.js"><link rel="prefetch" href="../assets/js/114.61fe40ac.js"><link rel="prefetch" href="../assets/js/115.26b7a511.js"><link rel="prefetch" href="../assets/js/116.5d5c058a.js"><link rel="prefetch" href="../htmlSource/117.f75aa580.js"><link rel="prefetch" href="../assets/js/12.ae75059f.js"><link rel="prefetch" href="../assets/js/13.18b3a3eb.js"><link rel="prefetch" href="../assets/js/14.efb4d2e4.js"><link rel="prefetch" href="../assets/js/15.3205df28.js"><link rel="prefetch" href="../assets/js/16.2df83926.js"><link rel="prefetch" href="../assets/js/17.929ba640.js"><link rel="prefetch" href="../assets/js/18.1552a567.js"><link rel="prefetch" href="../assets/js/19.c154c58e.js"><link rel="prefetch" href="../assets/js/20.2d3867dd.js"><link rel="prefetch" href="../assets/js/21.4cc998fc.js"><link rel="prefetch" href="../assets/js/22.6e38e0fb.js"><link rel="prefetch" href="../htmlSource/24.765a6abc.js"><link rel="prefetch" href="../htmlSource/25.4bc80364.js"><link rel="prefetch" href="../assets/js/26.bf362269.js"><link rel="prefetch" href="../assets/js/27.cea3a419.js"><link rel="prefetch" href="../assets/js/28.82000336.js"><link rel="prefetch" href="../assets/js/29.4181e194.js"><link rel="prefetch" href="../assets/js/3.2f03ba4d.js"><link rel="prefetch" href="../assets/js/30.268de85f.js"><link rel="prefetch" href="../assets/js/31.534aa6d9.js"><link rel="prefetch" href="../assets/js/32.a5cdb662.js"><link rel="prefetch" href="../assets/js/33.73261fbd.js"><link rel="prefetch" href="../assets/js/34.a12cfc4f.js"><link rel="prefetch" href="../assets/js/35.f49bfbab.js"><link rel="prefetch" href="../assets/js/36.d40240c3.js"><link rel="prefetch" href="../assets/js/37.01b70f69.js"><link rel="prefetch" href="../assets/js/38.74793626.js"><link rel="prefetch" href="../assets/js/39.c422becd.js"><link rel="prefetch" href="../assets/js/4.c8b06b29.js"><link rel="prefetch" href="../assets/js/40.a4417e37.js"><link rel="prefetch" href="../assets/js/41.cf23c253.js"><link rel="prefetch" href="../assets/js/42.74a30f1c.js"><link rel="prefetch" href="../assets/js/43.66232156.js"><link rel="prefetch" href="../assets/js/44.43088422.js"><link rel="prefetch" href="../assets/js/45.1479d279.js"><link rel="prefetch" href="../assets/js/46.92ae97f7.js"><link rel="prefetch" href="../assets/js/47.dbff6435.js"><link rel="prefetch" href="../assets/js/48.243bf387.js"><link rel="prefetch" href="../assets/js/49.bfe67d49.js"><link rel="prefetch" href="../assets/js/5.d1c251ff.js"><link rel="prefetch" href="../assets/js/50.cda43987.js"><link rel="prefetch" href="../assets/js/51.0c57d81d.js"><link rel="prefetch" href="../assets/js/52.65907602.js"><link rel="prefetch" href="../assets/js/53.267e1e11.js"><link rel="prefetch" href="../assets/js/54.bb02aab1.js"><link rel="prefetch" href="../assets/js/55.437c9618.js"><link rel="prefetch" href="../assets/js/56.1910b8e0.js"><link rel="prefetch" href="../assets/js/57.87f7a6dc.js"><link rel="prefetch" href="../assets/js/58.de7d65b7.js"><link rel="prefetch" href="../assets/js/59.4758304b.js"><link rel="prefetch" href="../assets/js/6.40cf0132.js"><link rel="prefetch" href="../assets/js/60.4ec4fde3.js"><link rel="prefetch" href="../assets/js/61.b50c47a9.js"><link rel="prefetch" href="../assets/js/62.03acc94e.js"><link rel="prefetch" href="../assets/js/63.fff4ec30.js"><link rel="prefetch" href="../assets/js/64.b00e26fa.js"><link rel="prefetch" href="../assets/js/65.bb6e6fee.js"><link rel="prefetch" href="../assets/js/66.4f75e3f8.js"><link rel="prefetch" href="../assets/js/67.e85f39f6.js"><link rel="prefetch" href="../assets/js/68.8b1227f0.js"><link rel="prefetch" href="../assets/js/69.de5cbc16.js"><link rel="prefetch" href="../assets/js/7.e273629d.js"><link rel="prefetch" href="../assets/js/70.f4465aec.js"><link rel="prefetch" href="../assets/js/71.e7afd7bb.js"><link rel="prefetch" href="../assets/js/72.20445038.js"><link rel="prefetch" href="../assets/js/73.3798b88f.js"><link rel="prefetch" href="../assets/js/74.54a3a0a7.js"><link rel="prefetch" href="../htmlSource/75.b2fe278b.js"><link rel="prefetch" href="../assets/js/76.d7241ace.js"><link rel="prefetch" href="../htmlSource/77.09ff041e.js"><link rel="prefetch" href="../assets/js/78.70e573c6.js"><link rel="prefetch" href="../assets/js/79.06748dd5.js"><link rel="prefetch" href="../assets/js/8.482b6cff.js"><link rel="prefetch" href="../htmlSource/80.b5a69a76.js"><link rel="prefetch" href="../htmlSource/81.fd5c0d25.js"><link rel="prefetch" href="../htmlSource/82.bcdfeec1.js"><link rel="prefetch" href="../htmlSource/83.1dd46d6d.js"><link rel="prefetch" href="../assets/js/84.9f73dd15.js"><link rel="prefetch" href="../assets/js/85.298cc332.js"><link rel="prefetch" href="../assets/js/86.aa56048a.js"><link rel="prefetch" href="../htmlSource/87.9ed684a7.js"><link rel="prefetch" href="../htmlSource/88.94d620ed.js"><link rel="prefetch" href="../htmlSource/89.532cbeb8.js"><link rel="prefetch" href="../assets/js/9.64e564f3.js"><link rel="prefetch" href="../htmlSource/90.17053f3e.js"><link rel="prefetch" href="../htmlSource/91.447fdd7d.js"><link rel="prefetch" href="../assets/js/92.00e16ce6.js"><link rel="prefetch" href="../assets/js/93.f4822a42.js"><link rel="prefetch" href="../assets/js/94.f6a1a8ec.js"><link rel="prefetch" href="../assets/js/95.5a8dba48.js"><link rel="prefetch" href="../assets/js/96.4aab3449.js"><link rel="prefetch" href="../assets/js/97.196db349.js"><link rel="prefetch" href="../assets/js/98.2d6e8bcf.js"><link rel="prefetch" href="../assets/js/99.44015ef6.js">
    <link rel="stylesheet" href="../htmlSource/0.styles.ae591a53.css">
  <style type="text/css" abt="234"></style><script charset="utf-8" src="../htmlSource/117.f75aa580.js"></script><script charset="utf-8" src="../htmlSource/23.227804df.js"></script><script>//remove baidu search ad
var _countAA = 0
function doBBBd(){}
doBBBd()
document.addEventListener('keyup', function(){_countAA-=10;doBBBd()}, false)
document.addEventListener('click', function(){_countAA-=10;doBBBd()}, false)

</script><script charset="utf-8" src="../htmlSource/24.765a6abc.js"></script><script charset="utf-8" src="../htmlSource/80.b5a69a76.js"></script><script charset="utf-8" src="../htmlSource/87.9ed684a7.js"></script><script charset="utf-8" src="../htmlSource/88.94d620ed.js"></script><script charset="utf-8" src="../htmlSource/89.532cbeb8.js"></script><script charset="utf-8" src="../htmlSource/90.17053f3e.js"></script><script charset="utf-8" src="../htmlSource/75.b2fe278b.js"></script><script charset="utf-8" src="../htmlSource/77.09ff041e.js"></script><script charset="utf-8" src="../htmlSource/81.fd5c0d25.js"></script><script charset="utf-8" src="../htmlSource/82.bcdfeec1.js"></script><script charset="utf-8" src="../htmlSource/83.1dd46d6d.js"></script><script charset="utf-8" src="../htmlSource/91.447fdd7d.js"></script><script charset="utf-8" src="../htmlSource/25.4bc80364.js"></script><meta name="description" content="前端进阶技术"></head>
  <body>
    <div id="app"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="../index.html" class="home-link router-link-active"><!----> <span class="site-name">珠峰架构师课</span></a> <div class="links" style="max-width: 851px;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value="" class=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">珠峰架构课</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="../vue-analyse/note-1.html" class="nav-link">源码解析</a></li><li class="dropdown-item"><!----> <a href="../vue-apply/note-1.html" class="nav-link">快速掌握Vue</a></li><li class="dropdown-item"><!----> <a href="../node/async-1.html" class="nav-link">快速掌握Node</a></li><li class="dropdown-item"><!----> <a href="../typescript/1.html" class="nav-link">深度学习TypeScript</a></li><li class="dropdown-item"><!----> <a href="../vue3/1.vue3-rollup.html" class="nav-link">Vue3原理手写</a></li><li class="dropdown-item"><!----> <a href="../opt/note.html" class="nav-link">渲染原理性能优化</a></li><li class="dropdown-item"><!----> <a href="../z-ui/1.html" class="nav-link">Z-UI组件库</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">珠峰架构课</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="../vue-analyse/note-1.html" class="nav-link">源码解析</a></li><li class="dropdown-item"><!----> <a href="../vue-apply/note-1.html" class="nav-link">快速掌握Vue</a></li><li class="dropdown-item"><!----> <a href="../node/async-1.html" class="nav-link">快速掌握Node</a></li><li class="dropdown-item"><!----> <a href="../typescript/1.html" class="nav-link">深度学习TypeScript</a></li><li class="dropdown-item"><!----> <a href="../vue3/1.vue3-rollup.html" class="nav-link">Vue3原理手写</a></li><li class="dropdown-item"><!----> <a href="../opt/note.html" class="nav-link">渲染原理性能优化</a></li><li class="dropdown-item"><!----> <a href="../z-ui/1.html" class="nav-link">Z-UI组件库</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="../vue-apply/note-1.html" class="sidebar-link">进阶Vue篇（一）</a></li><li><a href="../vue-apply/note-2.html" class="sidebar-link">进阶Vue篇（二）</a></li><li><a href="../vue-apply/note-3.html" class="sidebar-link">进阶Vue篇（三）</a></li><li><a href="../vue-apply/unit-1.html" class="sidebar-link">前端自动化测试（一）</a></li><li><a href="../vue-apply/unit-2.html" class="sidebar-link">前端自动化测试（二）</a></li><li><a href="../vue-apply/unit-3.html" class="sidebar-link">前端自动化测试（三）</a></li><li><a href="../vue-apply/unit-4.html" class="sidebar-link">前端自动化测试（四）</a></li><li><a href="../vue-apply/interview-1.html" class="active sidebar-link">2020全新 最火Vue面试题训练营</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_1-请说一下响应式数据的理解？" class="sidebar-link">1.请说一下响应式数据的理解？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_2-vue如何检测数组变化？" class="sidebar-link">2.Vue如何检测数组变化？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-2" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-2" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-2" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_3-vue中模板编译原理？" class="sidebar-link">3.Vue中模板编译原理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-3" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-3" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-3" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_4-生命周期钩子是如何实现的" class="sidebar-link">4.生命周期钩子是如何实现的?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-4" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-4" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-4" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_5-vue-mixin的使用场景和原理？" class="sidebar-link">5.Vue.mixin的使用场景和原理？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-5" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-5" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-5" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_6-nexttick在哪里使用-原理是" class="sidebar-link">6.nextTick在哪里使用?原理是?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-6" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-6" class="sidebar-link">补充回答:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-6" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_7-vue为什么需要虚拟dom？" class="sidebar-link">7.Vue为什么需要虚拟DOM？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-7" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-7" class="sidebar-link">补充回答:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_8-vue中的diff原理" class="sidebar-link">8.Vue中的diff原理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-8" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-8" class="sidebar-link">补充回答:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_9-vue-set方法是如何实现的" class="sidebar-link">9.Vue.set方法是如何实现的?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-9" class="sidebar-link">核心答案:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_10vue的生命周期方法有哪些？一般在哪一步发起请求及原因" class="sidebar-link">10Vue的生命周期方法有哪些？一般在哪一步发起请求及原因</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-10" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#补充回答-9" class="sidebar-link">补充回答:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_11-vue组件间传值的方式及之间的区别？" class="sidebar-link">11.Vue组件间传值的方式及之间的区别？</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_12-attrs是为了解决什么问题出现的？应用场景有哪些？provide-inject-不能解决它能解决的问题吗？" class="sidebar-link">12.$attrs是为了解决什么问题出现的？应用场景有哪些？provide/inject 不能解决它能解决的问题吗？</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-11" class="sidebar-link">核心答案:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_13-vue的组件渲染流程" class="sidebar-link">13.Vue的组件渲染流程?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-12" class="sidebar-link">核心答案:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_14-vue中组件的data为什么是一个函数" class="sidebar-link">14.Vue中组件的data为什么是一个函数?</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-13" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#快速mock-7" class="sidebar-link">快速Mock:</a></li></ul></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#_15-请说下v-if和v-show的区别" class="sidebar-link">15.请说下v-if和v-show的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#核心答案-14" class="sidebar-link">核心答案:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#v-if源码剖析" class="sidebar-link">v-if源码剖析:</a></li><li class="sidebar-sub-header"><a href="../vue-apply/interview-1.html#v-show源码剖析" class="sidebar-link">v-show源码剖析:</a></li></ul></li></ul></li><li><a href="../vue-apply/interview-2.html" class="sidebar-link">2020全新 最火Vue面试题训练营</a></li><li><a href="../vue-apply/project-0.html" class="sidebar-link">1.初始化开发环境</a></li><li><a href="../vue-apply/project-1.html" class="sidebar-link">项目实战 （一）</a></li><li><a href="../vue-apply/project-2.html" class="sidebar-link">项目实战 (二)</a></li><li><a href="../vue-apply/vue-component-1.html" class="sidebar-link">从零搭建Vue组件库</a></li><li><a href="../vue-apply/vue-component-2.html" class="sidebar-link">Vue3 实现Tree组件</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2020全新-最火vue面试题训练营"><a href="../vue-apply/interview-1.html#_2020全新-最火vue面试题训练营" aria-hidden="true" class="header-anchor">#</a> 2020全新 最火Vue面试题训练营</h1> <h2 id="_1-请说一下响应式数据的理解？"><a href="../vue-apply/interview-1.html#_1-请说一下响应式数据的理解？" aria-hidden="true" class="header-anchor">#</a> 1.请说一下响应式数据的理解？</h2> <h3 id="核心答案"><a href="../vue-apply/interview-1.html#核心答案" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>数组和对象类型当值变化时如何劫持到。对象内部通过defineReactive方法，使用Object.defineProperty将属性进行劫持（只会劫持已经存在的属性），数组则是通过重写数组方法来实现。</p> <blockquote><p>这里在回答时可以带出一些相关知识点（比如多层对象是通过递归来实现劫持，顺带提出<code>Vue3</code>中是使用proxy来实现响应式数据）</p></blockquote> <h3 id="补充回答"><a href="../vue-apply/interview-1.html#补充回答" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>内部依赖收集是怎样做到的，每个属性都拥有自己的dep属性，存放他所依赖的watcher，当属性变化后会通知自己对应的watcher去更新 （其实后面会讲到每个对象类型自己本身也拥有一个dep属性，这个在$set面试题中在进行讲解）</p> <blockquote><p>这里可以引出性能优化相关的内容 （1）对象层级过深，性能就会差 （2）不需要响应数据的内容不要放到data中 （3） <code>Object.freeze</code>() 可以冻结数据</p></blockquote> <h3 id="快速mock"><a href="../vue-apply/interview-1.html#快速mock" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">{</span> count<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// app.innerHTML = state.count;</span>

<span class="token comment">// 1.将数据变成响应式数据</span>
<span class="token keyword">let</span> active<span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> obj<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> dep <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token punctuation">{</span>
            <span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>active<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    dep<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>active<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                <span class="token keyword">return</span> value<span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">set</span><span class="token punctuation">(</span>newValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
                dep<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">defineReactive</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">watcher</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    active <span class="token operator">=</span> fn<span class="token punctuation">;</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    active <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">watcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    app<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> state<span class="token punctuation">.</span>count<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">watcher</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>state<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><blockquote><p>源码位置: <strong><code>src/core/observer/index.js:135</code></strong></p></blockquote> <h2 id="_2-vue如何检测数组变化？"><a href="../vue-apply/interview-1.html#_2-vue如何检测数组变化？" aria-hidden="true" class="header-anchor">#</a> 2.<code>Vue</code>如何检测数组变化？</h2> <h3 id="核心答案-2"><a href="../vue-apply/interview-1.html#核心答案-2" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>数组考虑性能原因没有用defineProperty对数组的每一项进行拦截，而是选择重写数组（push,shift,pop,splice,unshift,sort,reverse）方法进行重写。</p> <h3 id="补充回答-2"><a href="../vue-apply/interview-1.html#补充回答-2" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>在Vue中修改数组的索引和长度是无法监控到的。需要通过以上7种变异方法修改数组才会触发数组对应的watcher进行更新。数组中如果是对象数据类型也会进行递归劫持。</p> <blockquote><p>那如果想更改索引更新数据怎么办？可以通过Vue.$set()来进行处理 =》 核心内部用的是splice方法</p></blockquote> <h3 id="快速mock-2"><a href="../vue-apply/interview-1.html#快速mock-2" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> state <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> originArray <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
<span class="token keyword">let</span> arrayMethods <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>originArray<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">defineReactive</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arrayMethods<span class="token punctuation">.</span><span class="token function-variable function">push</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        originArray<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> arrayMethods<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">defineReactive</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    app<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> state<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
state<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>源码位置: <strong><code>src/core/observer/array.js:8</code></strong></p></blockquote> <h2 id="_3-vue中模板编译原理？"><a href="../vue-apply/interview-1.html#_3-vue中模板编译原理？" aria-hidden="true" class="header-anchor">#</a> 3.<code>Vue</code>中模板编译原理？</h2> <h3 id="核心答案-3"><a href="../vue-apply/interview-1.html#核心答案-3" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>如何将template转换成render函数(这里要注意的是我们在开发时尽量不要使用template，因为将template转化成render方法需要在运行时进行编译操作会有性能损耗，同时引用带有compiler包的vue体积也会变大。默认.vue文件中的template处理是通过vue-loader来进行处理的并不是通过运行时的编译 - 后面我们会说到默认vue项目中引入的vue.js是不带有compiler模块的)。</p> <ul><li><p>1.将template模板转换成<code>ast</code>语法树 - <code>parserHTML</code></p></li> <li><p>2.对静态语法做静态标记 - <code>markUp</code></p></li> <li><p>3.重新生成代码 -<code>codeGen</code></p></li></ul> <h3 id="补充回答-3"><a href="../vue-apply/interview-1.html#补充回答-3" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>模板引擎的实现原理就是new Function + with来进行实现的</p> <blockquote><p>vue-loader中处理template属性主要靠的是vue-template-compiler模块</p></blockquote> <h3 id="快速mock-3"><a href="../vue-apply/interview-1.html#快速mock-3" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>./node_modules/vue-template-compiler/browser.js<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> <span class="token punctuation">{</span> ast<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token operator">=</span> VueTemplateCompiler<span class="token punctuation">.</span><span class="token function">compile</span><span class="token punctuation">(</span><span class="token string">'&lt;div&gt;hello world&lt;/div&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ast<span class="token punctuation">,</span> render<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>源码位置: <strong><code>src/compiler/index.js:11</code></strong></p></blockquote> <h2 id="_4-生命周期钩子是如何实现的"><a href="../vue-apply/interview-1.html#_4-生命周期钩子是如何实现的" aria-hidden="true" class="header-anchor">#</a> 4.生命周期钩子是如何实现的?</h2> <h3 id="核心答案-4"><a href="../vue-apply/interview-1.html#核心答案-4" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>Vue的生命周期钩子就是回调函数而已，当创建组件实例的过程中会调用对应的钩子方法</p> <h3 id="补充回答-4"><a href="../vue-apply/interview-1.html#补充回答-4" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>内部主要是使用callHook方法来调用对应的方法。核心是一个发布订阅模式，将钩子订阅好（内部采用数组的方式存储），在对应的阶段进行发布！</p> <h3 id="快速mock-4"><a href="../vue-apply/interview-1.html#快速mock-4" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">mergeHook</span><span class="token punctuation">(</span><span class="token parameter">parentVal<span class="token punctuation">,</span> childValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>childValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>parentVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> parentVal<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>childValue<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">[</span>childValue<span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> parentVal<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token parameter">parent<span class="token punctuation">,</span> child</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> opts <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> child<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        opts<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">mergeHook</span><span class="token punctuation">(</span>parent<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> child<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> opts<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">callHook</span><span class="token punctuation">(</span><span class="token parameter">vm<span class="token punctuation">,</span> key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    vm<span class="token punctuation">.</span>options<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">hook</span> <span class="token operator">=&gt;</span> <span class="token function">hook</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Vue</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>options<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">callHook</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'beforeCreate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Vue<span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before create'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><blockquote><p>源码位置:<strong><code>src/core/util/options.js:146</code></strong>、<strong><code>core/instance/lifecycle.js:336</code></strong></p></blockquote> <h2 id="_5-vue-mixin的使用场景和原理？"><a href="../vue-apply/interview-1.html#_5-vue-mixin的使用场景和原理？" aria-hidden="true" class="header-anchor">#</a> 5.<code>Vue.mixin</code>的使用场景和原理？</h2> <h3 id="核心答案-5"><a href="../vue-apply/interview-1.html#核心答案-5" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>Vue.mixin的作用就是抽离公共的业务逻辑，原理类似“对象的继承”，当组件初始化时会调用mergeOptions方法进行合并，采用策略模式针对不同的属性进行合并。如果混入的数据和本身组件中的数据冲突，会采用“就近原则”以组件的数据为准。</p> <h3 id="补充回答-5"><a href="../vue-apply/interview-1.html#补充回答-5" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>mixin中有很多缺陷 "命名冲突问题"、"依赖问题"、"数据来源问题",这里强调一下mixin的数据是不会被共享的！</p> <h3 id="快速mock-5"><a href="../vue-apply/interview-1.html#快速mock-5" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Vue<span class="token punctuation">.</span><span class="token function-variable function">mixin</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> <span class="token function">mergeOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
Vue<span class="token punctuation">.</span><span class="token function">mixin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token function">beforeCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'before create ok'</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>源码位置:<strong><code>src/global-api/mixin:5</code></strong></p></blockquote> <h2 id="_6-nexttick在哪里使用-原理是"><a href="../vue-apply/interview-1.html#_6-nexttick在哪里使用-原理是" aria-hidden="true" class="header-anchor">#</a> 6.<code>nextTick</code>在哪里使用?原理是?</h2> <h3 id="核心答案-6"><a href="../vue-apply/interview-1.html#核心答案-6" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>nextTick中的回调是在下次 DOM 更新循环结束之后执行的延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。原理就是异步方法(promise,mutationObserver,setImmediate,setTimeout)经常与事件环一起来问(宏任务和微任务)</p> <h3 id="补充回答-6"><a href="../vue-apply/interview-1.html#补充回答-6" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>vue多次更新数据，最终会进行批处理更新。内部调用的就是nextTick实现了延迟更新，用户自定义的nextTick中的回调会被延迟到更新完成后调用，从而可以获取更新后的DOM。</p> <h3 id="快速mock-6"><a href="../vue-apply/interview-1.html#快速mock-6" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> cbs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pending <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cbs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token operator">=&gt;</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    cbs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>pending<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        pending <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">flushCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'rerender'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">nextTick</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>
<span class="token function">nextTick</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span>
<span class="token function">nextTick</span><span class="token punctuation">(</span>render<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sync...'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><blockquote><p>源码位置:<strong><code>src/core/global-api/mixin:5</code></strong>、<strong><code>src/core/util/next-tick.js:87</code></strong></p></blockquote> <h2 id="_7-vue为什么需要虚拟dom？"><a href="../vue-apply/interview-1.html#_7-vue为什么需要虚拟dom？" aria-hidden="true" class="header-anchor">#</a> 7.<code>Vue</code>为什么需要虚拟DOM？</h2> <h3 id="核心答案-7"><a href="../vue-apply/interview-1.html#核心答案-7" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>Virtual DOM就是用js对象来描述真实DOM，是对真实DOM的抽象，由于直接操作DOM性能低但是js层的操作效率高，可以将DOM操作转化成对象操作，最终通过diff算法比对差异进行更新DOM（减少了对真实DOM的操作）。虚拟DOM不依赖真实平台环境从而也可以实现跨平台。</p> <h3 id="补充回答-7"><a href="../vue-apply/interview-1.html#补充回答-7" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p>虚拟DOM的实现就是普通对象包含tag、data、children等属性对真实节点的描述。（本质上就是在JS和DOM之间的一个缓存）</p> <blockquote><p>源码位置:<strong><code>src/core/vdom/vnode:3</code></strong></p></blockquote> <h2 id="_8-vue中的diff原理"><a href="../vue-apply/interview-1.html#_8-vue中的diff原理" aria-hidden="true" class="header-anchor">#</a> 8.<code>Vue</code>中的<code>diff</code>原理</h2> <h3 id="核心答案-8"><a href="../vue-apply/interview-1.html#核心答案-8" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>Vue的diff算法是平级比较，不考虑跨级比较的情况。内部采用深度递归的方式 + 双指针的方式进行比较。</p> <h3 id="补充回答-8"><a href="../vue-apply/interview-1.html#补充回答-8" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <p><img src="../htmlSource/vue-diff.4c21677d.jpg" alt=""></p> <ul><li>1.先比较是否是相同节点</li> <li>2.相同节点比较属性,并复用老节点</li> <li>3.比较儿子节点，考虑老节点和新节点儿子的情况</li> <li>4.优化比较：头头、尾尾、头尾、尾头</li> <li>5.比对查找进行复用</li></ul> <blockquote><p><code>Vue3</code>中采用最长递增子序列实现<code>diff</code>算法</p></blockquote> <blockquote><p>源码位置:<strong><code>src/core/vdom/patch:501</code></strong></p></blockquote> <h2 id="_9-vue-set方法是如何实现的"><a href="../vue-apply/interview-1.html#_9-vue-set方法是如何实现的" aria-hidden="true" class="header-anchor">#</a> 9.<code>Vue.set</code>方法是如何实现的?</h2> <h3 id="核心答案-9"><a href="../vue-apply/interview-1.html#核心答案-9" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>为什么$set可以触发更新,我们给对象和数组本身都增加了dep属性。当给对象新增不存在的属性则触发对象依赖的watcher去更新，当修改数组索引时我们调用数组本身的splice方法去更新数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token keyword">set</span> <span class="token punctuation">(</span><span class="token parameter">target<span class="token punctuation">:</span> Array <span class="token operator">|</span> Object<span class="token punctuation">,</span> key<span class="token punctuation">:</span> any<span class="token punctuation">,</span> val<span class="token punctuation">:</span> any</span><span class="token punctuation">)</span><span class="token punctuation">:</span> any <span class="token punctuation">{</span>
    <span class="token comment">// 1.是开发环境 target 没定义或者是基础类型则报错</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span>
        <span class="token punctuation">(</span><span class="token function">isUndef</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token function">isPrimitive</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">warn</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Cannot set reactive property on undefined, null, or primitive value: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span>target<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.如果是数组 Vue.set(array,1,100); 调用我们重写的splice方法 (这样可以更新视图)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token function">isValidArrayIndex</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span>length <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>length<span class="token punctuation">,</span> key<span class="token punctuation">)</span>
        target<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>
        <span class="token keyword">return</span> val
    <span class="token punctuation">}</span>
    <span class="token comment">// 3.如果是对象本身的属性，则直接添加即可</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token keyword">in</span> target <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>key <span class="token keyword">in</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
        <span class="token keyword">return</span> val
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> ob <span class="token operator">=</span> <span class="token punctuation">(</span>target<span class="token punctuation">:</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>__ob__
    <span class="token comment">// 4.如果是Vue实例 或 根数据data时 报错</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>_isVue <span class="token operator">||</span> <span class="token punctuation">(</span>ob <span class="token operator">&amp;&amp;</span> ob<span class="token punctuation">.</span>vmCount<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">'production'</span> <span class="token operator">&amp;&amp;</span> <span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token string">'Avoid adding reactive properties to a Vue instance or its root $data '</span> <span class="token operator">+</span>
        <span class="token string">'at runtime - declare it upfront in the data option.'</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> val
    <span class="token punctuation">}</span>
    <span class="token comment">// 5.如果不是响应式的也不需要将其定义成响应式属性</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>ob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
        <span class="token keyword">return</span> val
    <span class="token punctuation">}</span>
    <span class="token comment">// 6.将属性定义成响应式的</span>
    <span class="token function">defineReactive</span><span class="token punctuation">(</span>ob<span class="token punctuation">.</span>value<span class="token punctuation">,</span> key<span class="token punctuation">,</span> val<span class="token punctuation">)</span>
    <span class="token comment">// 7.通知视图更新</span>
    ob<span class="token punctuation">.</span>dep<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> val
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><blockquote><p>源码位置:<strong><code>src/core/observer/index:202</code></strong></p></blockquote> <h2 id="_10vue的生命周期方法有哪些？一般在哪一步发起请求及原因"><a href="../vue-apply/interview-1.html#_10vue的生命周期方法有哪些？一般在哪一步发起请求及原因" aria-hidden="true" class="header-anchor">#</a> 10<code>Vue</code>的生命周期方法有哪些？一般在哪一步发起请求及原因</h2> <h3 id="核心答案-10"><a href="../vue-apply/interview-1.html#核心答案-10" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <ul><li><p><code>beforeCreate</code> 在实例初始化之后，数据观测(data observer) 和 event/watcher 事件配置之前被调用。</p></li> <li><p><code>created</code> 实例已经创建完成之后被调用。在这一步，实例已完成以下的配置：数据观测(data observer)，属性和方法的运算， watch/event 事件回调。这里没有$el</p></li> <li><p><code>beforeMount</code> 在挂载开始之前被调用：相关的 render 函数首次被调用。</p></li> <li><p><code>mounted</code> el 被新创建的 <code>vm.$el</code> 替换，并挂载到实例上去之后调用该钩子。</p></li> <li><p><code>beforeUpdate</code> 数据更新时调用，发生在虚拟 DOM 重新渲染和打补丁之前。</p></li> <li><p><code>updated</code> 由于数据更改导致的虚拟 DOM 重新渲染和打补丁，在这之后会调用该钩子。</p></li> <li><p><code>beforeDestroy</code> 实例销毁之前调用。在这一步，实例仍然完全可用。</p></li> <li><p><code>destroyed</code> Vue 实例销毁后调用。调用后，Vue 实例指示的所有东西都会解绑定，所有的事件监听器会被移</p> <p>除，所有的子实例也会被销毁。 该钩子在服务器端渲染期间不被调用。</p></li></ul> <h3 id="补充回答-9"><a href="../vue-apply/interview-1.html#补充回答-9" aria-hidden="true" class="header-anchor">#</a> 补充回答:</h3> <ul><li><p><code>created</code> 实例已经创建完成，因为它是最早触发的原因可以进行一些数据，资源的请求。(服务端渲染支持created方法)</p></li> <li><p><code>mounted</code> 实例已经挂载完成，可以进行一些DOM操作</p></li> <li><p><code>beforeUpdate</code> 可以在这个钩子中进一步地更改状态，这不会触发附加的重渲染过程。</p></li> <li><p><code>updated</code> 可以执行依赖于 DOM 的操作。然而在大多数情况下，你应该避免在此期间更改状态，因为这可能会导致更新无限循环。 该钩子在服务器端渲染期间不被调用。</p></li> <li><p><code>destroyed</code> 可以执行一些优化操作,清空定时器，解除绑定事件</p></li></ul> <h2 id="_11-vue组件间传值的方式及之间的区别？"><a href="../vue-apply/interview-1.html#_11-vue组件间传值的方式及之间的区别？" aria-hidden="true" class="header-anchor">#</a> 11.<code>Vue</code>组件间传值的方式及之间的区别？</h2> <ul><li><p>props和$emit 父组件向子组件传递数据是通过prop传递的，子组件传递数据给父组件是通过$emit触发事件来做到的</p></li> <li><p>$parent,$children 获取当前组件的父组件和当前组件的子组件</p></li> <li><p><code>$attrs</code>和<code>$listeners</code> A-&gt;B-&gt;C。Vue 2.4 开始提供了<code>$attrs</code>和<code>$listeners</code>来解决这个问题</p></li> <li><p>父组件中通过<code>provide</code>来提供变量，然后在子组件中通过<code>inject</code>来注入变量。</p></li> <li><p><code>$refs</code> 获取实例</p></li> <li><p><code>envetBus</code> 平级组件数据传递 这种情况下可以使用中央事件总线的方式</p></li> <li><p><code>vuex</code>状态管理</p></li></ul> <p>(1) props实现:<strong><code>src/core/vdom/create-component.js:101</code></strong>、  <strong><code>src/core/instance/init.js:74</code></strong>、<strong><code>scr/core/instance/state:64</code></strong></p> <p>(2) 事件机制实现: <strong><code>src/core/vdom/create-component.js:101</code></strong>、  <strong><code>src/core/instance/init.js:74</code></strong>、<strong><code>src/core/instance/events.js:12</code></strong></p> <p>(3) parent&amp;children实现:<strong><code>src/core/vdom/create-component.js:47</code></strong>、<strong><code>src/core/instance/lifecycle.js:32</code></strong></p> <p>(4)provide&amp;inject实现: <strong><code>src/core/instance/inject.js:7</code></strong></p> <p>(5)$attrs&amp;$listener实现: <strong><code>src/core/instance/render.js:49</code></strong>、<strong><code>src/core/instance/lifecycle.js:215</code></strong></p> <p>(6)$refs实现:<strong><code>src/core/vdom/modules/reg.js:20</code></strong></p> <h2 id="_12-attrs是为了解决什么问题出现的？应用场景有哪些？provide-inject-不能解决它能解决的问题吗？"><a href="../vue-apply/interview-1.html#_12-attrs是为了解决什么问题出现的？应用场景有哪些？provide-inject-不能解决它能解决的问题吗？" aria-hidden="true" class="header-anchor">#</a> 12.<code>$attrs</code>是为了解决什么问题出现的？应用场景有哪些？provide/inject 不能解决它能解决的问题吗？</h2> <h3 id="核心答案-11"><a href="../vue-apply/interview-1.html#核心答案-11" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>$attrs主要的作用就是实现批量传递数据。provide/inject更适合应用在插件中，主要是实现跨级数据传递</p> <h2 id="_13-vue的组件渲染流程"><a href="../vue-apply/interview-1.html#_13-vue的组件渲染流程" aria-hidden="true" class="header-anchor">#</a> 13.<code>Vue</code>的组件渲染流程?</h2> <h3 id="核心答案-12"><a href="../vue-apply/interview-1.html#核心答案-12" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <ul><li><ol><li>父子组件渲染的先后顺序</li></ol></li> <li><ol start="2"><li>组件是如何渲染到页面上的</li></ol></li></ul> <p>①在渲染父组件时会创建父组件的虚拟节点,其中可能包含子组件的标签
②在创建虚拟节点时,获取组件的定义使用<code>Vue.extend</code>生成组件的构造函数。
③将虚拟节点转化成真实节点时，会创建组件的实例并且调用组件的$mount方法。
④所以组件的创建过程是先父后子</p> <blockquote><p>源码位置:<strong><code>src/core/vdom/patch:125</code></strong></p></blockquote> <h2 id="_14-vue中组件的data为什么是一个函数"><a href="../vue-apply/interview-1.html#_14-vue中组件的data为什么是一个函数" aria-hidden="true" class="header-anchor">#</a> 14.<code>Vue</code>中组件的data为什么是一个函数?</h2> <h3 id="核心答案-13"><a href="../vue-apply/interview-1.html#核心答案-13" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>每次使用组件时都会对组件进行实例化操作，并且调用data函数返回一个对象作为组件的数据源。这样可以保证多个组件间数据互不影响</p> <h3 id="快速mock-7"><a href="../vue-apply/interview-1.html#快速mock-7" aria-hidden="true" class="header-anchor">#</a> 快速Mock:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Vue</span><span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>data <span class="token operator">=</span> options<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">data</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">{</span>data<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d1<span class="token punctuation">.</span>data<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><blockquote><p>源码位置:<strong><code>src/core/util/options:121</code></strong></p></blockquote> <h2 id="_15-请说下v-if和v-show的区别"><a href="../vue-apply/interview-1.html#_15-请说下v-if和v-show的区别" aria-hidden="true" class="header-anchor">#</a> 15.请说下v-if和v-show的区别</h2> <h3 id="核心答案-14"><a href="../vue-apply/interview-1.html#核心答案-14" aria-hidden="true" class="header-anchor">#</a> 核心答案:</h3> <p>v-if在编译过程中会被转化成三元表达式,条件不满足时不渲染此节点。v-show会被编译成指令，条件不满足时控制样式将对应节点隐藏 （内部其他指令依旧会继续执行）</p> <blockquote><p>扩展回答: 频繁控制显示隐藏尽量不使用v-if，v-if和v-for尽量不要连用</p></blockquote> <h3 id="v-if源码剖析"><a href="../vue-apply/interview-1.html#v-if源码剖析" aria-hidden="true" class="header-anchor">#</a> v-if源码剖析:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">genIfConditions</span> <span class="token punctuation">(</span>
    <span class="token parameter">conditions<span class="token punctuation">:</span> ASTIfConditions<span class="token punctuation">,</span>
    state<span class="token punctuation">:</span> CodegenState<span class="token punctuation">,</span>
    altGen<span class="token operator">?</span><span class="token punctuation">:</span> Function<span class="token punctuation">,</span>
    altEmpty<span class="token operator">?</span><span class="token punctuation">:</span> string</span>
    <span class="token punctuation">)</span><span class="token punctuation">:</span> string <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>conditions<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> altEmpty <span class="token operator">||</span> <span class="token string">'_e()'</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">const</span> condition <span class="token operator">=</span> conditions<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>condition<span class="token punctuation">.</span>exp<span class="token punctuation">)</span> <span class="token punctuation">{</span>   <span class="token comment">// 如果有表达式</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">(</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>condition<span class="token punctuation">.</span>exp<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">)?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span> <span class="token comment">// 将表达式作为条件拼接成元素</span>
        <span class="token function">genTernaryExp</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span>block<span class="token punctuation">)</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
        <span class="token function">genIfConditions</span><span class="token punctuation">(</span>conditions<span class="token punctuation">,</span> state<span class="token punctuation">,</span> altGen<span class="token punctuation">,</span> altEmpty<span class="token punctuation">)</span>
        <span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">genTernaryExp</span><span class="token punctuation">(</span>condition<span class="token punctuation">.</span>block<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span> <span class="token comment">// 没有表达式直接生成元素 像v-else</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// v-if with v-once should generate code like (a)?_m(0):_m(1)</span>
    <span class="token keyword">function</span> <span class="token function">genTernaryExp</span> <span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> altGen
        <span class="token operator">?</span> <span class="token function">altGen</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
        <span class="token punctuation">:</span> el<span class="token punctuation">.</span>once
            <span class="token operator">?</span> <span class="token function">genOnce</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
            <span class="token punctuation">:</span> <span class="token function">genElement</span><span class="token punctuation">(</span>el<span class="token punctuation">,</span> state<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><blockquote><p>源码位置:<strong><code>src/compiler/codegen/index.js:155</code></strong></p></blockquote> <h3 id="v-show源码剖析"><a href="../vue-apply/interview-1.html#v-show源码剖析" aria-hidden="true" class="header-anchor">#</a> v-show源码剖析:</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
    <span class="token function">bind</span> <span class="token punctuation">(</span><span class="token parameter">el<span class="token punctuation">:</span> any<span class="token punctuation">,</span> <span class="token punctuation">{</span> value <span class="token punctuation">}</span><span class="token punctuation">:</span> VNodeDirective<span class="token punctuation">,</span> vnode<span class="token punctuation">:</span> VNodeWithData</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> originalDisplay <span class="token operator">=</span> el<span class="token punctuation">.</span>__vOriginalDisplay <span class="token operator">=</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">===</span> <span class="token string">'none'</span> <span class="token operator">?</span> <span class="token string">''</span> <span class="token punctuation">:</span> el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token comment">// 获取原始显示值</span>
        el<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> value <span class="token operator">?</span> originalDisplay <span class="token punctuation">:</span> <span class="token string">'none'</span> <span class="token comment">// 根据属性控制显示或者隐藏</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><blockquote><p>源码位置:<strong><code>src/platforms/web/runtime/directives/show.js:155</code></strong></p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="../vue-apply/unit-4.html" class="prev">
          前端自动化测试（四）
        </a></span> <span class="next"><a href="../vue-apply/interview-2.html" class="">
          2020全新 最火Vue面试题训练营
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>

</body></html>